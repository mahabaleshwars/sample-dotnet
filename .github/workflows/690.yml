name: Repro punycode deprecation in setup-dotnet v5

on:
  workflow_dispatch:

jobs:
  repro:
    runs-on: ubuntu-latest
    # Enable Node.js deprecation stack traces for the action runtime
    env:
      NODE_OPTIONS: --trace-deprecation
    steps:
      - name: Create example global.json
        run: |
          cat > global.json <<'JSON'
          {
            "sdk": {
              "version": "8.0.100"
            }
          }
          JSON

      - name: Setup .NET (actions/setup-dotnet@v5)
        uses: mahabaleshwars/setup-dotnet@bug/690-test
        with:
          global-json-file: global.json
          cache: false

      - name: Verify environment
        run: |
          dotnet --info
          echo "Node version: $(node -v)"
